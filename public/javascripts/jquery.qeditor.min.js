var QEDITOR_ALLOW_TAGS_ON_PASTE,QEDITOR_DISABLE_ATTRIBUTES_ON_PASTE,QEDITOR_TOOLBAR_HTML;QEDITOR_TOOLBAR_HTML='<div class="qeditor_toolbar">\n  <a href="#" data-action="bold" class="qe-bold"><span class="fa fa-bold" title="Bold"></span></a> \n  <a href="#" data-action="italic" class="qe-italic"><span class="fa fa-italic" title="Italic"></span></a> \n  <a href="#" data-action="underline" class="qe-underline"><span class="fa fa-underline" title="Underline"></span></a> \n  <a href="#" data-action="strikethrough" class="qe-strikethrough"><span class="fa fa-strikethrough" title="Strike-through"></span></a>		 \n  <span class="vline"></span>\n  <span class="qe-icon qe-heading">\n    <ul class="qe-menu">\n      <li><a href="#" data-name="h1" class="qe-h1">Heading 1</a></li>\n      <li><a href="#" data-name="h2" class="qe-h2">Heading 2</a></li>\n      <li><a href="#" data-name="h3" class="qe-h3">Heading 3</a></li>\n      <li><a href="#" data-name="h4" class="qe-h4">Heading 4</a></li>\n      <li><a href="#" data-name="h5" class="qe-h5">Heading 5</a></li>\n      <li><a href="#" data-name="h6" class="qe-h6">Heading 6</a></li>\n      <li class="qe-hline"></li>\n      <li><a href="#" data-name="p" class="qe-p">Paragraph</a></li>\n    </ul>\n    <span class="icon fa fa-font"></span>\n  </span>\n  <span class="vline"></span>\n  <a href="#" data-action="insertorderedlist" class="qe-ol"><span class="fa fa-list-ol" title="Insert Ordered-list"></span></a> \n  <a href="#" data-action="insertunorderedlist" class="qe-ul"><span class="fa fa-list-ul" title="Insert Unordered-list"></span></a> \n   \n  <span class="vline"></span> \n  <a href="#" data-action="insertHorizontalRule" class="qe-hr"><span class="fa fa-minus" title="Insert Horizontal Rule"></span></a> \n  <a href="#" data-action="blockquote" class="qe-blockquote"><span class="fa fa-quote-left" title="Blockquote"></span></a> \n  <a href="#" data-action="pre" class="qe-pre"><span class="fa fa-code" title="Pre"></span></a> \n  <a href="#"  data-toggle="modal" data-target="#linkmodal"  class="qe-link"><span class="fa fa-link" title="Create Link" title="Create Link"></span></a> \n  <a href="#" data-toggle="modal" data-target="#imagemodal" class="qe-image"><span class="fa fa-picture-o" title="Insert Image"></span></a> \n  <a href="#" onclick="return QEditor.toggleFullScreen(this);" class="qe-fullscreen pull-right"><span class="fa fa-arrows-alt" title="Toggle Fullscreen"></span></a> \n</div>',QEDITOR_ALLOW_TAGS_ON_PASTE="div,p,ul,ol,li,hr,br,b,strong,i,em,img,h2,h3,h4,h5,h6,h7",QEDITOR_DISABLE_ATTRIBUTES_ON_PASTE=["style","class","id","name","width","height"],window.QEditor={actions:["bold","italic","underline","strikethrough","insertunorderedlist","insertorderedlist","blockquote","pre"],action:function(a,b,c){var d;if(d=$(".qeditor_preview",$(a).parent().parent()),d.find(".qeditor_placeholder").remove(),d.focus(),null===c&&(c=!1),("blockquote"===b||"pre"===b)&&(c=b,b="formatBlock"),"createLink"===b){if(c=prompt("Type URL:"),0===c.trim().length)return!1}else if("insertimage"===b&&(c=prompt("Image URL:"),0===c.trim().length))return!1;return QEditor.state(b)?document.execCommand(b,!1,null):document.execCommand(b,!1,c),QEditor.checkSectionState(d),d.change(),!1},state:function(a){return document.queryCommandState(a)===!0},prompt:function(a){var b;return b=prompt(a),b?b:!1},toggleFullScreen:function(a){var b;return b=$(a).parent().parent(),"1"===b.data("qe-fullscreen")?QEditor.exitFullScreen():QEditor.enterFullScreen(b),!1},enterFullScreen:function(a){return a.data("qe-fullscreen","1").addClass("qeditor_fullscreen"),a.find(".qeditor_preview").focus(),a.find(".qe-fullscreen span").attr("class","fa fa-compress")},exitFullScreen:function(){return $(".qeditor_border").removeClass("qeditor_fullscreen").data("qe-fullscreen","0").find(".qe-fullscreen span").attr("class","fa fa-arrows-alt")},getCurrentContainerNode:function(){var a,b;return window.getSelection&&(b=window.getSelection().anchorNode,a=3===b.nodeType?b.parentNode:b),a},checkSectionState:function(a){var b,c,d,e,f,g;for(f=QEditor.actions,g=[],d=0,e=f.length;e>d;d++)b=f[d],c=a.parent().find(".qeditor_toolbar a[data-action="+b+"]"),g.push(QEditor.state(b)?c.addClass("qe-state-on"):c.removeClass("qe-state-on"));return g},version:function(){return"0.2.0"}},function(a){return a.fn.qeditor=function(){return this.each(function(){var b,c,d,e,f,g;return d=a(this),d.addClass("qeditor"),c=a('<div class="qeditor_preview clearfix" contentEditable="true"></div>'),e=a('<div class="qeditor_placeholder"></div>'),a(document).keyup(function(a){return 27===a.keyCode?QEditor.exitFullScreen():void 0}),document.execCommand("defaultParagraphSeparator",!1,"p"),b=d.val(),c.html(b),c.addClass(d.attr("class")),d.after(c),e.text(d.attr("placeholder")),c.attr("placeholder",d.attr("placeholder")||""),c.append(e),c.focusin(function(){return QEditor.checkSectionState(c),a(this).find(".qeditor_placeholder").remove()}),c.blur(function(){var b;return b=a(this),QEditor.checkSectionState(c),0===b.html().length||"<br>"===b.html()||"<p></p>"===b.html()?a(this).html('<div class="qeditor_placeholder">'+a(this).attr("placeholder")+"</div>"):void 0}),c.change(function(){var b,c;return b=a(this),c=b.parent().find(".qeditor"),c.val(b.html())}),c.on("paste",function(){var b;return b=a(this),setTimeout(function(){var a,c,d,e;for(c=b.find("*"),d=0,e=QEDITOR_DISABLE_ATTRIBUTES_ON_PASTE.length;e>d;d++)a=QEDITOR_DISABLE_ATTRIBUTES_ON_PASTE[d],c.removeAttr(a);return c.find(":not("+QEDITOR_ALLOW_TAGS_ON_PASTE+")").contents().unwrap(),b.change(),!0},100)}),c.keyup(function(){return QEditor.checkSectionState(c),a(this).change()}),c.on("click",function(a){return QEditor.checkSectionState(c),a.stopPropagation()}),c.keydown(function(a){var b,c;return b=QEditor.getCurrentContainerNode(),c="",b&&b.nodeName&&(c=b.nodeName.toLowerCase()),13!==a.keyCode||a.shiftKey||a.ctrlKey||"blockquote"!==c&&"pre"!==c?void 0:(a.stopPropagation(),document.execCommand("InsertParagraph",!1),document.execCommand("formatBlock",!1,"p"),document.execCommand("outdent",!1),!1)}),d.hide(),d.wrap('<div class="qeditor_border"></div>'),d.after(c),g=a(QEDITOR_TOOLBAR_HTML),f=g.find(".qe-heading"),f.mouseenter(function(){return a(this).addClass("hover"),a(this).find(".qe-menu").show()}),f.mouseleave(function(){return a(this).removeClass("hover"),a(this).find(".qe-menu").hide()}),g.find(".qe-heading .qe-menu a").click(function(){var b;return b=a(this),b.parent().parent().hide(),QEditor.action(this,"formatBlock",b.data("name")),!1}),g.find("a[data-action]").click(function(){return QEditor.action(this,a(this).attr("data-action"))}),c.before(g)})}}(jQuery);